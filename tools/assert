function assert_help {
	retval=( "Assert some condition" )
}

if (( $+ENABLE_ASSERT )); then
	function assert_constructor {
		grab messages
		# Also need zsh/parameter p:functrace
	}

	function assert {
		if [[ $# -lt 1 ]]; then
			echo "Assertion failed inside assert" >&2
			throw AssertionError
		fi

		typeset i
		for i in "$@"; do
			if ! eval "$i"; then
				shift
				error "Assertion failed at $functrace[1]"
				throw AssertionError
			fi
		done
	}
else
	function assert {
		return 0
	}
fi

# vim:ft=zsh
